create table person
(
    id  integer generated by default as identity
        primary key,
    name varchar(150) not null,
    birthYear int check ( birthYear > 1900 )
);

create table book(
     id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
     person_id int REFERENCES person(id) ON DELETE SET NULL,
     title varchar(150) NOT NULL UNIQUE,
     author varchar(100) NOT NULL,
     releaseDate int check ( releaseDate > 0 )
);

INSERT INTO person (name, birthYear) VALUES
         ('Алексей Морозов', 1988),
         ('Мария Волкова', 1992),
         ('Иван Петров', 1985),
         ('Екатерина Смирнова', 1995),
         ('Дмитрий Кузнецов', 1990),
         ('Анна Соколова', 1998),
         ('Сергей Иванов', 1982),
         ('Ольга Романова', 1993),
         ('Никита Орлов', 1997),
         ('Татьяна Лебедева', 1989);

INSERT INTO book (title, author, releaseDate, person_id) VALUES
         ('Гарри Поттер и философский камень', 'Дж. К. Роулинг', 1997, 1),
         ('Гарри Поттер и тайная комната', 'Дж. К. Роулинг', 1998, 2),
         ('Гарри Поттер и узник Азкабана', 'Дж. К. Роулинг', 1999, NULL),
         ('Гарри Поттер и Кубок огня', 'Дж. К. Роулинг', 2000, 3),
         ('Гарри Поттер и Орден Феникса', 'Дж. К. Роулинг', 2003, NULL),
         ('Гарри Поттер и Принц-полукровка', 'Дж. К. Роулинг', 2005, 4),
         ('Гарри Поттер и Дары Смерти', 'Дж. К. Роулинг', 2007, NULL),

         ('Ведьмак: Последнее желание', 'Анджей Сапковский', 1993, 5),
         ('Ведьмак: Меч предназначения', 'Анджей Сапковский', 1992, NULL),
         ('Ведьмак: Кровь эльфов', 'Анджей Сапковский', 1994, 6),
         ('Ведьмак: Час презрения', 'Анджей Сапковский', 1995, NULL),
         ('Ведьмак: Крещение огнём', 'Анджей Сапковский', 1996, 7),
         ('Ведьмак: Башня Ласточки', 'Анджей Сапковский', 1997, NULL),
         ('Ведьмак: Владычица Озера', 'Анджей Сапковский', 1999, NULL),

         ('Властелин колец: Братство Кольца', 'Дж. Р. Р. Толкин', 1954, 8),
         ('Властелин колец: Две крепости', 'Дж. Р. Р. Толкин', 1954, NULL),
         ('Властелин колец: Возвращение короля', 'Дж. Р. Р. Толкин', 1955, 9),
         ('Хоббит, или Туда и обратно', 'Дж. Р. Р. Толкин', 1937, NULL),

         ('Хроники Нарнии: Лев, колдунья и платяной шкаф', 'К. С. Льюис', 1950, NULL),
         ('Хроники Нарнии: Принц Каспиан', 'К. С. Льюис', 1951, 10),
         ('Хроники Нарнии: Покоритель зари', 'К. С. Льюис', 1952, NULL),

         ('Игра престолов', 'Джордж Р. Р. Мартин', 1996, NULL),
         ('Битва королей', 'Джордж Р. Р. Мартин', 1998, 1),
         ('Буря мечей', 'Джордж Р. Р. Мартин', 2000, NULL),
         ('Пир стервятников', 'Джордж Р. Р. Мартин', 2005, NULL),
         ('Танец с драконами', 'Джордж Р. Р. Мартин', 2011, 2),

         ('Темная башня: Стрелок', 'Стивен Кинг', 1982, NULL),
         ('Темная башня: Извлечение троих', 'Стивен Кинг', 1987, NULL),
         ('Темная башня: Пустоши', 'Стивен Кинг', 1991, 3),

         ('Эрагон', 'Кристофер Паолини', 2002, NULL),
         ('Старшая', 'Кристофер Паолини', 2005, NULL),
         ('Брисингр', 'Кристофер Паолини', 2008, 4),
         ('Наследие', 'Кристофер Паолини', 2011, NULL),

         ('Американские боги', 'Нил Гейман', 2001, 5),
         ('Звёздная пыль', 'Нил Гейман', 1999, NULL),
         ('Никогде', 'Нил Гейман', 1996, NULL),

         ('Имя ветра', 'Патрик Ротфусс', 2007, NULL),
         ('Страхи мудреца', 'Патрик Ротфусс', 2011, 6),

         ('Остров сокровищ', 'Роберт Льюис Стивенсон', 1883, NULL),
         ('Три мушкетёра', 'Александр Дюма', 1844, NULL);



